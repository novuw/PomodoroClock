<!DOCTYPE html>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Muli&effect=3d" rel="stylesheet">
<link href="styles.css" type="text/css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
function startTime(){
    var today = new Date();
    var hours = today.getHours();
    var minutes = today.getMinutes();
    var seconds = today.getSeconds();
    minutes = checkTime(minutes);
    seconds = checkTime(seconds);
    document.getElementById('date').innerHTML = hours + ":" + minutes + ":" + seconds;
    var time = setTimeout(startTime, 500);
}
function checkTime(i){
    if (i < 10) {
        i = "0" + i;
    };
    return i;
}
//MainJS
$(document).ready(function(){
    var breakTime = 10.00;
    var workTime = 25.00;
    $('circle').html(workTime);
    $('#plusB').on('click', function(){
        if (breakTime == 120){
            alert("Can't go any higher!");;
        } else{
        breakTime++;
        $("#break").html(breakTime);
        $('text').html(workTime);
    }
    });
    $('#plusW').on('click', function(){
        if (workTime == 120){
            alert("Can't go any higher!");;
        } else{
        workTime++;
        $("#work").html(workTime);
        $('text').html(workTime);
    }
    });
    $('#minusB').on('click', function(){
        if (breakTime == 0){
            alert("Can't go any lower!");
        } else{
        breakTime--;
        $("#break").html(breakTime);
        $('text').html(workTime);
    }
    });
    $('#minusW').on('click', function(){
        if (workTime == 0){
            alert("Can't go any lower!");;
        } else{
        workTime--;
        $("#work").html(workTime);
        $('text').html(workTime);
    }
    });
    //timer code taken from https://codepen.io/yaphi1/pen/KpbRZL
$('circle').on('click', function(){
    var time_in_minutes = workTime;
    var current_time = Date.parse(new Date());
    var deadline = new Date(current_time + time_in_minutes*60*1000);


function time_remaining(endtime){
	var t = Date.parse(endtime) - Date.parse(new Date());
	var seconds = Math.floor( (t/1000) % 60 );
	var minutes = Math.floor( (t/1000/60) % 60 );
	var hours = Math.floor( (t/(1000*60*60)) % 24 );
	var days = Math.floor( t/(1000*60*60*24) );
	return {'total':t, 'days':days, 'hours':hours, 'minutes':minutes, 'seconds':seconds};
}
function run_clock(id,endtime){
	var clock = document.getElementById(id);
	function update_clock(){
		var t = time_remaining(endtime);
        $('text').html(t.minutes+" : "+t.seconds);
		if(t.total<=0){
            $('text').html("Break!")

        }
	       }
	    update_clock(); // run function once at first to avoid delay
	    var timeinterval = setInterval(update_clock,1000);
        }
        run_clock('clockdiv',deadline);

    });



    //Break clock
    $('#break').on('click', function(){
        var time_in_minutes = breakTime;
        var current_time = Date.parse(new Date());
        var deadline = new Date(current_time + time_in_minutes*60*1000);


    function time_remaining(endtime){
    	var t = Date.parse(endtime) - Date.parse(new Date());
    	var seconds = Math.floor( (t/1000) % 60 );
    	var minutes = Math.floor( (t/1000/60) % 60 );
    	var hours = Math.floor( (t/(1000*60*60)) % 24 );
    	var days = Math.floor( t/(1000*60*60*24) );
    	return {'total':t, 'days':days, 'hours':hours, 'minutes':minutes, 'seconds':seconds};
    }
    function run_clock(id,endtime){
    	var clock = document.getElementById(id);
    	function update_clock(){
    		var t = time_remaining(endtime);
            $('text').html(t.minutes+" : "+t.seconds);
    		if(t.total<=0){
                $('text').html("Restart the cycle!")
            }
    	       }
    	    update_clock(); // run function once at first to avoid delay
    	    var timeinterval = setInterval(update_clock2,1000);
            }
            run_clock('clockdiv',deadline2);
    });

});
</script>
<head>
    <meta charset= "UTF-8">
    <title>Pomodoro Clock</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<html>
<body onload="startTime()">
    <h1>Pomodoro Clock</h1>
    <p id="date"></p>
<div>
        <h2 style="position: fixed; left: 540px;">Break Time</h2>
        <h2 style="position: fixed; right: 555px;">Work Time</h2>
</div>
<div>
</br>
</br>
    <div class="container">
        <img src="plus.png" id="plusB" style="width: 45px; position: fixed; right: 860px; top: 178px;">
            <h3  id="break" style="position: fixed; left: 600px;">10</h3>
        <img src="minus.png" id="minusB" style="width: 45px; position: fixed; left: 555px; top: 178px;">
    </div>
    <div class="container">
        <img src="plus.png" id="plusW" style="width: 45px; position: fixed; right: 555px; top: 178px;">
            <h3  id="work" style="position: fixed; right: 600px;">25</h3>
        <img src="minus.png"  id="minusW" style="width: 45px; position: fixed; left: 860px; top: 178px;">
    </div>

</div>
<svg height="400px" width="1200px">
    <circle cx="771" cy="200" r="150" stroke="white" stroke-width="3"/>
    <text id="timer" x="771" y="50%" text-anchor="middle" font-family="Muli" font-size="80px" fill="white" style="color: white;">25 : 00</text>
    </svg>
    <center><button id="break" class="btn" style="color: #000000; background-color: #00b300">Break</button></br></br>
    <button onClick="window.location.reload()" class="btn" style="background-color: #00b300"><img src="refresh.png" style="width: 20px"></button>
</center>
</body>
<h3 style="font-size: 15px; color: white; font-faily: Muli; display: inline-block; position: fixed; right: 5px; bottom: 5px;">Made By: Elijah Harbut</h3>
</html>
