<!DOCTYPE html>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Muli&effect=3d" rel="stylesheet">
<link href="styles.css" type="text/css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
function startTime(){
    var today = new Date();
    var hours = today.getHours();
    var minutes = today.getMinutes();
    var seconds = today.getSeconds();
    minutes = checkTime(minutes);
    seconds = checkTime(seconds);
    document.getElementById('date').innerHTML = hours + ":" + minutes + ":" + seconds;
    var time = setTimeout(startTime, 500);
}
function checkTime(i){
    if (i < 10) {
        i = "0" + i;
    };
    return i;
}
//MainJS
$(document).ready(function(){
    var breakTime = 10;
    var workTime = 25;
    $('circle').html(workTime);
    $('#plusB').on('click', function(){
        if (breakTime == 60){
            alert("Can't go any higher!");;
        } else{
        breakTime++;
        $("#break").html(breakTime);
        $('text').html(breakTime + " : 00");
    }
    });
    $('#plusW').on('click', function(){
        if (workTime == 60){
            alert("Can't go any higher!");;
        } else{
        workTime++;
        $("#work").html(workTime);
        $('text').html(workTime + " : 00");
    }
    });
    $('#minusB').on('click', function(){
        if (breakTime == 0){
            alert("Can't go any lower!");
        } else{
        breakTime--;
        $("#break").html(breakTime);
        $('text').html(breakTime + " : 00");
    }
    });
    $('#minusW').on('click', function(){
        if (workTime == 0){
            alert("Can't go any lower!");;
        } else{
        workTime--;
        $("#work").html(workTime);
        $('text').html(workTime + " : 00");
    }
    });
    //timer code taken from https://codepen.io/yaphi1/pen/KpbRZL
$('circle').on('click', function(){
    var time_in_minutes = workTime;
    var current_time = Date.parse(new Date());
    var deadline = new Date(current_time + time_in_minutes*60*1000);


function time_remaining(endtime){
	var t = Date.parse(endtime) - Date.parse(new Date());
	var seconds = Math.floor( (t/1000) % 60 );
	var minutes = Math.floor( (t/1000/60) % 60 );
	var hours = Math.floor( (t/(1000*60*60)) % 24 );
	var days = Math.floor( t/(1000*60*60*24) );
	return {'total':t, 'days':days, 'hours':hours, 'minutes':minutes, 'seconds':seconds};
}
function run_clock(id,endtime){
	var clock = document.getElementById(id);
	function update_clock(){
		var t = time_remaining(endtime);
        if (t.seconds< 10){
            $('text').html(t.minutes+" : 0"+t.seconds);
        } else{
            $('text').html(t.minutes+" : "+t.seconds);
        }
		if(t.total<=0){
            var snd = new Audio("beep.wav");
            snd.play();
            $('text').html("Break!")
        }
	       }
	    update_clock(); // run function once at first to avoid delay
	    var timeinterval = setInterval(update_clock,1000);
        }
        run_clock('clockdiv',deadline);

    });

});
</script>
<head>
    <meta charset= "UTF-8">
    <title id="date">EST</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<html>
<body onload="startTime()">
    <h1 style="text-decoration: underline">Pomodoro Clock</h1></br>
    <p style="color: white; font-family: Muli; font-size: 10px; text-align: center;">
A Pomodoro kitchen timer, after which the method is named <a href="https://en.wikipedia.org/wiki/Pomodoro_Technique">The Pomodoro Technique</a> is a time management method developed by Francesco Cirillo in the late 1980s. The technique uses a timer to break down work into intervals, traditionally 25 minutes in length, separated by short breaks.</p>
<div>
    <center>
        <div class="container">
            <h2 style="text-decoration: underline">Work Time</h2></br>
            <img src="plus.png" id="plusW" style="width: 45px">
            <h3  id="work">25</h3>
            <img src="minus.png"  id="minusW" style="width: 45px;">
        </div>
    <button onClick="window.location.reload()" class="btn" style="background-color: #00b300"><img src="refresh.png" style="width: 20px"></button></br></br>
    </center>
</br>
</div>
<svg width="100%" height="320px" style="display: block; margin: auto;">
    <circle cx="50%" cy="50%" r="150" stroke="white" stroke-width="3"/>
    <text id="timer" x="50%" y="50%" text-anchor="middle" font-family="Muli" font-size="80px" fill="white" style="color: white;">25 : 00</text>
    </svg>
</br></br>
    <h5 style="color: #00b300; text-align: center; font-size: 10px;">***TO STOP THE BEEPING WHEN THE TIMER IS DONE, HIT THE RELOAD BUTTON***</h5>
</body>
<h3 style="font-size: 15px; color: white; font-faily: Muli; display: inline-block; position: fixed; right: 5px; bottom: 5px;">Made By: Elijah Harbut</h3>
</html>
